var loginForm=document.querySelector(".login-form"),loginField=loginForm.querySelector("[name=login]"),passwordField=loginForm.querySelector("[ name=password]"),loginPopup=document.querySelector(".login-form-wrapper"),feedbackLink=document.querySelector(".btn-feedback-form"),popup=document.querySelector(".modal-feedback"),close=popup.querySelector(".close-popup"),overlay=document.querySelector(".overlay-hidden"),feedbackForm=popup.querySelector("form"),btnFeedback=popup.querySelector(".btn-send"),nameField=popup.querySelector("[name=fullname]"),email=popup.querySelector("[name=email]"),message=popup.querySelector("[name=message]"),isStorageSupport=!0,storage="",storageLogin="";try{storage=localStorage.getItem("nameField")}catch(e){isStorageSupport=!1}try{storageLogin=localStorage.getItem("loginField")}catch(e){isStorageSupport=!1}loginForm.addEventListener("submit",function(e){loginField.value&&passwordField.value||(e.preventDefault(),loginPopup.classList.toggle("modal-error"))}),feedbackLink.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),overlay.classList.add("overlay"),console.log(overlay),storage?(nameField.value=storage,email.focus()):nameField.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.contains("modal-error")&&popup.classList.remove("modal-error"),overlay.classList.contains("overlay")&&overlay.classList.remove("overlay")}),feedbackForm.addEventListener("submit",function(e){nameField.value&&email.value&&message.value?isStorageSupport&&localStorage.setItem("nameField",nameField.value):(e.preventDefault(),console.log("Все поля обязательны для заполнения!"),popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&popup.classList.remove("modal-show"),overlay.classList.contains("overlay")&&overlay.classList.remove("overlay"))}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show")}),feedbackForm.addEventListener("submit",function(e){nameField.value&&emailField.value&&messageArea.value||(e.preventDefault(),console.log("Все поля обязательны для заполнения!"),popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&popup.classList.remove("modal-show"))});